#!/bin/ash

#set -x

export TEXTDOMAIN=logout_gui

MSG_X="$(gettext "Active graphical server"): <b>Wayland</b>"
MSG_WM="$(gettext "Active window manager"): <b>$(cat /etc/windowmanager)</b>"

exec yad \
    --title "$(gettext 'Puppy Log Out')" \
    --window-icon=gtk-preferences \
    --text="${MSG_WM=}\n${MSG_X=}" \
    --text-align=center \
    --form \
    --align=center \
    --columns=2 \
    --field "$(gettext Reboot)"\!system-reboot-symbolic:FBTN "kill \$YAD_PID; wmreboot" \
    --field "$(gettext 'Shut Down')"\!system-shutdown-symbolic:FBTN "kill \$YAD_PID; wmpoweroff" \
    --field "$(gettext 'Save changes')"\!document-save-symbolic:FBTN "kill \$YAD_PID; save2flash" \
    --field "$(gettext 'Install Puppy')"\!media-flash-symbolic:FBTN "kill \$YAD_PID; bootflash" \
    --field "$(gettext 'Restart graphical server')"\!view-refresh-symbolic:FBTN "kill \$YAD_PID; restartwm" \
    --field "$(gettext 'Exit to Prompt')"\!application-exit-symbolic:FBTN "kill \$YAD_PID; wmexit" \
    --field "$(gettext 'Rebuild Menu')"\!open-menu-symbolic:FBTN "kill \$YAD_PID; fixmenus; killall -HUP labwc" \
    --field "$(gettext 'Lock screen')"\!system-lock-screen-symbolic:FBTN "kill \$YAD_PID; puplock" \
    --no-buttons \
    --use-interp
