download() {
    [ -f gfnrename-0.6.tar.gz ] || curl --fail --retry 3 --max-time 60 -o gfnrename-0.6.tar.gz https://distro.ibiblio.org/easyos/source/oe/dunfell/gfnrename-0.6.tar.gz
}

build() {
    tar -xzf gfnrename-0.6.tar.gz
    cd gfnrename-0.6
    patch -p1 < ../gtk3.patch
    patch -p1 < ../gcc14.patch
    ./autogen.sh
    make install
    mkdir -p /usr/local/share/doc
    mv /usr/local/doc/gfnrename /usr/local/share/doc/
    rmdir /usr/local/doc 2>/dev/null
    mkdir -p /usr/local/share/applications
    cat << EOF > /usr/local/share/applications/gfnrename.desktop
[Desktop Entry]
Name=gFnRename
Comment=Easily rename multiple files
Exec=gfnrename
Icon=rename
Terminal=false
Type=Application
Categories=X-FilesystemUtility
StartupNotify=true
Encoding=UTF-8
GenericName=gFnRename
EOF
}