download() {
    [ -f gmeasures-0.7.tar.gz ] || curl --fail --retry 3 --max-time 60 -o gmeasures-0.7.tar.gz https://distro.ibiblio.org/puppylinux/sources/g/gmeasures-0.7.tar.gz
}

build() {
    tar -xzf gmeasures-0.7.tar.gz
    cd gmeasures-0.7
    patch -p1 < ../gtk3.patch
    patch -p1 < ../gcc14.patch
    ./autogen.sh
    make install
    mkdir -p /usr/local/share/doc
    mv /usr/local/doc/gmeasures /usr/local/share/doc/
    rmdir /usr/local/doc 2>/dev/null
    mkdir -p /usr/local/share/applications
    cat << EOF > /usr/local/share/applications/gmeasures.desktop
[Desktop Entry]
Name=gMeasures
Comment=Weights and measures converter
Exec=gmeasures
Icon=calculator
Terminal=false
Type=Application
Categories=Calculator
StartupNotify=true
Encoding=UTF-8
GenericName=gMeasures
EOF
}